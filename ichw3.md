# 通用高速缓存存储器结构及工作原理
## 1.什么是高速缓存存储器？
###### 又称cache，是位于CPU与内存之间的容量较小但速度很快的存储器，可保存CPU刚使用过或循环使用的部分数据，如果CPU需要再次使用该数据，那么就不用从内存重新调动该部分数据而是从cache中直接调用，这样就避免了重复存取数据，降低了CPU等待时间，提高了系统效率。（缓解处理数据的两端速度不匹配带来的时间上的浪费）
![cache](https://github.com/titina0729/ichw/blob/master/1.png)

## 2.结构
![cache基本结构](https://github.com/titina0729/ichw/blob/master/cache基本结构.png)
###### cache的结构与内存相似，由地址和内容组成，但是不同于内存的是，cache line中包含着tag，valid以及data三个部分，也就是说，cache所储存的内容不仅有data（数据），还有相应的内容在内存中的地址信息（tag），除此之外为了加快寻找速度，一般还包含着一个有效位（valid）用来标记该cache line是否包含着有效的数据。一个tag，一个valid和一个data构成了一个cache line。而这些cache line 构成了cache。
###### 
## 3.工作原理
#### 1.地址映射
cache的容量很小，其能够保存的内容只是内存内容的一个子集，且cache与主存的数据交换是以块为单位的，为了把信息放到cache中，要利用到映射的原理，将内存地址定位到cache当中，这就被称为地址映射。
##### A.直接映射
![直接映射](https://github.com/titina0729/ichw/blob/master/直接映射.gif)
###### 主存中的一个块只能映射到cache当中的某一个特定的块中。e.g.主存中第0块、第16块、……、第2032块，只能映射到cache的第0块，而主存的第1块、第17块、第2033块只能映射到cache的第1块……。
###### 直接映射是最简单的映射方法，它的硬件简单，成本低，地址变换速度块，而且不涉及替换算法问题。但是这种方式不够灵活，cache的存储空间得不到充分的利用，每个主存块只有一个固定位置可以存放，容易产生冲突导致命中率下降，效率下降，只适合大容量的cache。
##### B.全相联映射
![全相联映射](https://github.com/titina0729/ichw/blob/master/全相联映射.gif)
###### 主存中任何一块都可以映射到cache中的任意一个位置上。
###### 全相联映射方式比较灵活，cache的利用率高，但是硬件上的实现比较困难，因此只适合于小容量的cache。
##### C.组相连映射
![组相联映射](https://github.com/titina0729/ichw/blob/master/组相联映射.gif)
###### 是直接映射与全相联映射的折中方案，其将主存和cache分别分组，主存块存放在哪个组是固定的，但是存放在这个组的哪一块是灵活的，也就是主存中的各块与cache的组号之间有固定的映射联系，但可自由映射到对应cache组中的任意一块
